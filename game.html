<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Cosmic Clash Game</title>
<style>
    body {
        margin: 0;
        padding: 0;
        font-family: Arial, sans-serif;
        background: #1a1a1a;
        color: white;
        overflow: hidden;
    }

    #game-wrapper {
        width: 100vw;
        height: 100vh;
        display: flex;
        flex-direction: column;
        justify-content: space-between;
        align-items: center;
    }

    #setup {
        text-align: center;
        margin-top: 50px;
    }

    #game-area {
        width: 100%;
        height: 100%;
        display: none;
        position: relative;
    }

    #center-battle {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        font-size: 1.5rem;
        padding: 15px 25px;
        background: rgba(255,255,255,0.1);
        border-radius: 10px;
        text-align: center;
    }

    #player-hand, #opponent-hand {
        display: flex;
        gap: 10px;
        padding: 20px;
    }

    #player-hand {
        position: absolute;
        bottom: 20px;
        left: 50%;
        transform: translateX(-50%);
    }

    #opponent-hand {
        position: absolute;
        top: 20px;
        left: 50%;
        transform: translateX(-50%);
    }

    .card {
        background: #333;
        border: 2px solid #555;
        border-radius: 10px;
        padding: 12px 18px;
        font-size: 1.1rem;
        cursor: pointer;
        transition: 0.2s;
    }

    .player-card:hover {
        background: #555;
        transform: scale(1.1);
    }
</style>
</head>
<body>
<div id="game-wrapper">

    <div id="setup">
        <h1>Cosmic Clash</h1>
        <input id="player-name" placeholder="Enter your name" />
        <button id="start-game">Start Game</button>
    </div>

    <div id="game-area">
        <div id="opponent-hand"></div>
        <div id="center-battle">Clash Appears Here</div>
        <div id="player-hand"></div>
    </div>
</div>

<script>
const elements = [
    "Rock","Paper","Scissors","Darkness",
    "Magic","Lightning","Earth","Fire","Water","Cosmic"
];

let playerHand = [];
let opponentHand = [];
let playerName = "";

const playerDiv = document.getElementById("player-hand");
const opponentDiv = document.getElementById("opponent-hand");
const centerDiv = document.getElementById("center-battle");
const gameArea = document.getElementById("game-area");

// Battle Matrix
const matrix = {
    "Rock":     ["T","L","W","W","T","T","L","L","W"],
    "Paper":    ["W","T","L","W","W","T","T","L","L"],
    "Scissors": ["L","W","T","L","W","W","T","T","L"],
    "Darkness": ["L","L","W","T","L","L","W","T","T"],
    "Magic":    ["T","L","L","W","T","L","W","W","T"],
    "Lightning":["T","T","L","L","W","T","L","W","W"],
    "Earth":    ["W","T","T","L","L","W","T","L","W"],
    "Fire":     ["W","W","T","T","L","L","W","T","L"],
    "Water":    ["L","W","W","T","T","L","L","W","T"]
};

// Start Game

document.getElementById("start-game").onclick = () => {
    const nameInput = document.getElementById("player-name");
    if (!nameInput.value) return alert("Enter your name!");

    playerName = nameInput.value;
    document.getElementById("setup").style.display = "none";
    gameArea.style.display = "block";

    initHands();
    renderHands();
};

function initHands() {
    playerHand = Array.from({length:7}, randomCard);
    opponentHand = Array.from({length:7}, randomCard);
}

function randomCard() {
    const i = Math.floor(Math.random() * elements.length);
    return { element: elements[i] };
}

function renderHands() {
    playerDiv.innerHTML = "";
    opponentDiv.innerHTML = "";

    playerHand.forEach((card, i) => {
        const div = document.createElement("div");
        div.className = "card player-card";
        div.innerText = card.element;
        div.onclick = () => playTurn(i);
        playerDiv.appendChild(div);
    });

    opponentHand.forEach(() => {
        const div = document.createElement("div");
        div.className = "card";
        div.innerText = "?";
        opponentDiv.appendChild(div);
    });
}

// Resolve rules
function resolveBattle(p, o) {
    if (p === "Cosmic" && o === "Cosmic") return "Tie";
    if (p === "Cosmic") return "Win";
    if (o === "Cosmic") return "Lose";

    const row = matrix[p];
    const col = elements.indexOf(o);

    const r = row[col];
    if (r === "W") return "Win";
    if (r === "L") return "Lose";
    return "Tie";
}

function playTurn(i) {
    const pCard = playerHand[i];
    const oppIndex = Math.floor(Math.random() * opponentHand.length);
    const oCard = opponentHand[oppIndex];

    const result = resolveBattle(pCard.element, oCard.element);

    centerDiv.innerText = `${pCard.element} vs ${oCard.element} â†’ ${result}`;

    if (result === "Win" || result === "Tie") playerHand.push(randomCard());
    if (result === "Lose") opponentHand.push(randomCard());

    playerHand.splice(i, 1);
    opponentHand.splice(oppIndex, 1);

    renderHands();

    if (playerHand.length === 0) centerDiv.innerText += " | You Lost!";
    if (opponentHand.length === 0) centerDiv.innerText += " | You Won!";
}
</script>
</body>
</html>